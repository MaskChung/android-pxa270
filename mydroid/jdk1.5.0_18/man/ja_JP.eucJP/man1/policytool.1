'\" t
.\" @(#)policytool.1 1.9 01/07/17 SMI;
.\" Copyright 2004 Sun Microsystems, Inc. All rights reserved.
.\" Copyright 2004 Sun Microsystems, Inc. Tous droits r駸erv駸.
.\" 
.TH policytool 1 "2004 年 6 月 22 日"
.SH "名前"
policytool \- ポリシーファイル作成および管理ツール
.SH "形式"
.B policytool
.SH "機能説明"
.IX "policy file creation and  management tool" "" "policy file creation and management tool \(em \fLpolicytool\fP"
.IX "policytool" "" "\fLpolicytool\fP \(em policy file creation and management tool"
Java 実行時のポリシーは、
さまざまなソースを出所とするコードが、
さまざまな主体として実行されるときに、どのようなアクセス権を
利用できるかを指定するもので、Policy オブジェクトによって表現さ
れます。 デフォルトの Policy の実装は、静的な ASCII 形式のポリ
シー構成ファイルから情報を取得します。 
.LP
ポリシーファイルは、簡単なテキストエディタを使用するか、この
ドキュメントで説明するグラフィカルな Policy Tool ユーティリティを
使用して作成できます。 Policy Tool を使うと、入力の手間を省ける
だけでなく、ポリシーファイルの構文について知る必要がないた
め、エラーを減らすことができます。 
.LP
.SS "Policy Tool の起動"
.LP
Policy Tool を起動するには、コマンド行に次のように入力します。 
.LP
.RS
.ft 3
.nf
policytool
.fi
.ft 1
.RE
.TP
[Policy Tool] ウィンドウが表示されます。 
.LP
Policy Tool は、起動するたびに、「ユーザポリシーファイル」と
呼ばれるファイルからポリシー情報を取得して、ウィンドウに表示
しようとします。 デフォルトのユーザポリシーファイルは、ホーム
ディレクトリにある .java.policy という名前のファイルです。 ユーザポリシー
ファイルが見つからない場合は、そのことを示すメッセージが表示
され、空白の [Policy Tool] ウィンドウが表示されます。つまり、
ウィンドウに見出しやボタンは表示されますが、データは含まれてい
ません。 
.LP
Policy Tool を起動したあとは、作業する任意のポリシーファイル
を開くことができます。また、ポリシーエントリを追加したり、必要
に応じてキーストアを指定したりして、ファイルを保存すれば、
新しいポリシーファイルを作成することもできます。 
.LP
Policy Tool をはじめて実行した時点では、ユーザポリシーファイル
は存在していません (手動で作成した場合を除く)。 
.SS "新しいポリシーファイルの作成"
.LP
新しいポリシーファイルを作成するには、[ファイル] メニューから
 [新規] コマンドを選択します。 現在開かれているポリシーファイル
があれば、必要に応じてファイルの保存を促すメッセージが表示さ
れたあとで、そのファイルが閉じ、新しい [Policy Tool] ウィン
ドウが表示されます。そのウィンドウには見出しやボタンが表示され
ていますが、データは含まれていません。 
.LP
注: 上記の操作は、Policy Tool をはじめて実行する場合は必要あり
ません。 Policy Tool はユーザポリシーファイルを開こうとしますが、
そのファイルがまだ存在しないため (手動で作成した場合を除く)、
データが何も含まれていないウィンドウが表示されます。 
.LP
新しい [Policy Tool] ウィンドウが表示されたら、ポリシーエントリを
作成したり、キーストアを指定したり (キーストア別名を指定したポリ
シーエントリがある場合) することができます。 ポリシーファイルは、
いつでも保存できます。 
.SS "ほかのポリシーファイルを開く"
.LP
現在作業中のポリシーファイルとは別のポリシーファイルで作業するには、
[ファイル] メニューの [開く] コマンドを使います。 
.LP
現在開かれているポリシーファイルがあれば、必要に応じてファイルの
保存を促すメッセージが表示されたあとで、そのファイルが閉じ、
[開く] ダイアログが表示されます。このダイアログでは、ディレクトリ
構造内をナビゲートして、作業するポリシーファイルがあるディレクトリを検索
できます。 ファイルを選択し、[了解] ボタンを選択します。 
.LP
選択したポリシーファイルの情報が [Policy Tool] ウィンドウに表示さ
れます。表示される情報は、ポリシーファイル名、キーストアの URL 
(存在する場合)、そしてポリシーファイル内の各ポリシーエントリの 
CodeBase、SignedBy、および 主体部分です。 
.SS "キーストアの指定"
.LP
ポリシーエントリの SignedBy 部分で指定された別名の鍵の情報を
含むキーストアを指定するには、[編集] メニューの [キーストアの変更] 
コマンドを選択します。 
.LP
ダイアログボックスが表示されたら、新しいキーストアの URL と、
キーストアのタイプ (省略可能) を指定します。 
.LP
たとえば、/tests/ ディレクトリにある mykeystore という名前のキーストア
を指定するには、[新規キーストアの URL] というラベルの付いたテキストボッ
クスに、次のように "file: 
.I URL
" を入力します。 
.LP
.RS
.ft 3
.nf
file:/tests/mykeystore
.fi
.ft 1
.RE
.LP
また、キーストアのタイプとして JKS (サンがサポートしている独自の
キーストアのタイプ) を指定するには、[新規キーストアのタイプ] というラ
ベルの付いたテキストボックスに、次のように入力します。 
.LP
.RS
.ft 3
.nf
JKS
.fi
.ft 1
.RE
.LP
キーストアの URL と、必要に応じてタイプを指定したら、[了解] を選択
します。操作を取り消す場合は、[取消し] を選択します。 操作を取
り消さなかった場合は、[キーストア:] というラベルのテキストボックス
に、指定したキーストアの URL とタイプが表示されます。 
.SS "新しいポリシーエントリの追加"
.LP
新しいポリシーエントリを追加するには、[Policy Tool] メイン
ウィンドウで [ポリシーエントリの追加] ボタンを選択します。 [ポリシーエントリ] 
ダイアログボックスが表示されます。 
.LP
このダイアログボックスでは、次の情報を指定します。 
.TP
\(bu 
[CodeBase] エントリ (省略可能)。コードの出所を表す URL を
指定します。 たとえば、ローカルの /JavaSoft/TESTS/ ディレクトリから
のコードを指定するには、[CodeBase] テキストボックスで次のよう
に "file: 
.I URL
" を入力します。 
.LP
.RS
.ft 3
.nf
file:/JavaSoft/TESTS
.fi
.ft 1
.RE
.TP
\(bu 
[SignedBy] エントリ (省略可能)。コードに署名するために使われた
非公開鍵を所有する署名者を参照するための、キーストアにある
別名を指定します。 たとえば、「duke」という別名を指定するには、
[SignedBy] テキストボックスに次のように入力します。 
.LP
.RS
.ft 3
.nf
duke
.fi
.ft 1
.RE
.TP
\(bu 
[主体] エントリ (省略可能)。アクセス権が許可されるためには、
どの主体としてコードを実行する必要があるかを示す、主体のリスト
を指定します。 「新しい主体の追加」を参照してください。 
.TP
\(bu 
1 つ以上のアクセス権エントリ。CodeBase および SignedBy の
値によって指定されたソースを出所とするコード (これらの値が指定さ
れていない場合は任意のコード) に許可するアクセス権を指定し
ます。 「新規アクセス権の追加」を参照してください。 
.LP
.SS "ポリシーファイルの編集"
.LP
既存のポリシーエントリを編集するには、[Policy Tool] メイン
ウィンドウでそのエントリの行を選択し、[ポリシーエントリの編集] 
ボタンを選択します。 または、エントリの行をダブルクリック
するだけでも、そのエントリが編集できるようになります。 
.LP
新しいポリシーエントリを追加するときと同じ [ポリシーエントリ] 
ダイアログボックスが表示されます。ただし、この場合は、既存
のポリシーエントリの情報が表示されています。 表示されている
情報を変更するには、CodeBase と SignedBy の値の場合は
直接入力し、主体とアクセス権の値の場合はボタンを
使用して情報を変更します。 
.LP
編集が終わったら、[完了] ボタンを選択します。操作を取り消す
場合は、[取消し] を選択します。 
.SS "ポリシーエントリの削除"
.LP
ポリシーファイルからポリシーエントリを削除するには、[Policy Tool] 
メインウィンドウでそのエントリの行を選択し、[ポリシーエントリの削除] 
ボタンを選択します。 
.LP
選択したポリシーエントリ全体が表示されます。このエントリを削除
するには [了解] を選択し、このエントリを削除しない場合は [取消し] 
を選択します。 
.SS "ポリシーファイルの保存"
.LP
既存のポリシーファイルに対する変更内容を保存するには、[ファイル] メ
ニューの [保存] コマンドを選択します。 
.LP
作成した新しいポリシーファイルを保存したり、既存のポリシー
ファイルを新しい名前のポリシーファイルにコピーしたりするには、
[ファイル] メニューの [別名保存] コマンドを選択します。 [別名保存] ダ
イアログボックスが表示されます。 
.LP
ディレクトリ構造内をナビゲートして、ポリシーファイルの保存先のディレクトリを
選択します。 ファイル名を入力し、[了解] ボタンを選択します。 ポリシー
ファイルが保存され、そのファイルの名前とパスが、[ポリシーファイル:] という
ラベルの付いたテキストボックスに表示されます。 
.SS "Policy Tool の終了"
.LP
Policy Tool を終了するには、[ファイル] メニューの [終了] コマンドを選択します。 
.SS "警告ログの表示"
.LP
Policy Tool が、警告を警告ログに保存したというメッセージを
表示した場合は、[ファイル] メニューの [警告ログの表示] コマンドを
選択すれば、警告ログを表示できます。 
.LP
たとえば、ポリシーファイルでキーストアの URL を指定しているが、
このキーストアがまだ存在していない場合は、ファイルを開くときなど
さまざまな場面で警告が表示されます。 警告が存在する場合でも、
ポリシーファイルの作業は続行できます。 
.SH "関連項目"
http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/policytool.html
.LP
http://java.sun.com/j2se/1.5.0/docs/guide/security/permissions.html
.LP
keytool(1)
.LP
Java Tutorial のセキュリティの例にも、ポリシーツールの使い方
の例が紹介されています。
