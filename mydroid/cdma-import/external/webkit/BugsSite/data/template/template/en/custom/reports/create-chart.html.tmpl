#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.15
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1138010588',
        'name' => 'reports/create-chart.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $error;
        
        eval { BLOCK: {
    $output .=  "\n";
    $output .=  "\n\n";
    $output .=  "\n";
    #line 29 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $context->process('global/header.html.tmpl', { 'title' => 'Create Chart' });
    $output .=  "\n";
    #line 33 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $context->process('reports/series-common.html.tmpl', { 'donames' => 1 });
    $output .=  "\n\n<script type=\"text/javascript\">\n";
    $output .=  "\nfunction subcatSelected() {\n  var cat = document.chartform.category.value;\n  var subcat = document.chartform.subcategory.value;\n  var names = series[cat][subcat];\n  \n  var namewidget = document.chartform.name;\n\n  namewidget.options.length = 0;\n  var i = 0;\n\n  for (x in names) {\n    namewidget.options[i] = new Option(x, names[x]);\n    i++;\n  }\n\n  namewidget.options[0].selected = true;\n  \n  checkNewState();\n}\n</script>\n  ";
    #line 60 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('gttext', 'Grand Total');
    $output .=  "\n\n<form method=\"get\" action=\"chart.cgi\" name=\"chartform\">  \n  \n  <table cellpadding=\"2\" cellspacing=\"2\" border=\"0\">";
    #line 124 "template/en/custom/reports/create-chart.html.tmpl"
    if (! $stash->get('category') || $stash->get(['category', 0, 'size', 0]) eq 0) {
    $output .=  "\n      <tr>\n        <td>\n          <i>No data sets exist, or none are visible to you.</i>\n        </td>\n      </tr>";
    }
    else {
    $output .=  "\n      <tr>\n        <th>Category:</th>\n        <th></th>\n        <th>Sub-category:</th>\n        <th></th>\n        <th>Name:</th>\n        <th><br>\n        </th>\n      </tr>\n      <tr>\n      ";
    #line 83 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $context->process('series_select', { 'sel' => { 'name' => 'category', 'size' => 5, 'onchange' => 'catSelected();
                                                         subcatSelected();'  } });
    $output .=  "\n                                   \n        <td>\n          <noscript>\n            <input type=\"submit\" name=\"action-assemble\" value=\"Update --&gt;\">\n          </noscript>\n        </td>\n        ";
    #line 94 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $context->process('series_select', { 'sel' => { 'name' => 'subcategory', 'size' => 5, 'onchange' => 'subcatSelected()'  } });
    $output .=  "\n                                   \n        <td>\n          <noscript>\n            <input type=\"submit\" name=\"action-assemble\" value=\"Update --&gt;\">\n          </noscript>\n        </td>\n        \n        <td align=\"left\">\n          <label for=\"name\" accesskey=\"N\">\n            <select name=\"name\" id=\"name\" style=\"width: 15em\"\n                    size=\"5\" multiple=\"multiple\"\n                    ";
    #line 108 "template/en/custom/reports/create-chart.html.tmpl"
    if (!($stash->get(['name', 0, 'keys', 0, 'size', 0]))) {
    $output .=  ('' . "disabled=\"disabled\"");
    }
    
    $output .=  ">";
    #line 112 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($value, $error, $oldloop);
        my $list = $stash->get(['name', 0, 'keys', 0, 'sort', 0]);
        
        unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
            $list = Template::Config->iterator($list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($value, $error) = $list->get_first();
        eval { $oldloop = $stash->get('loop') };
        $stash->set('loop', $list);
        eval {
    LOOP:   while (! $error) {
                $stash->{'x'} = $value;
    $output .=  "\n                <option value=\"";
    #line 110 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['name', 0, $stash->get('x'), 0]);
        
        &$filter($output);
    };
    
    $output .=  "\">";
    #line 111 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('x');
        
        &$filter($output);
    };
    
    $output .=  "</option>";;
                ($value, $error) = $list->get_next();
            }
        };
        $stash->set('loop', $oldloop);
        die $@ if $@;
        $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
        die $error if $error;
    };
    
    #line 115 "template/en/custom/reports/create-chart.html.tmpl"
    if (!($stash->get(['name', 0, 'keys', 0, 'size', 0]))) {
    $output .=  "\n                <option value=\"\" disabled=\"disabled\"></option>";
    }
    
    $output .=  "\n            </select>\n          </label>\n        </td>\n\n        <td align=\"center\" valign=\"middle\"> \n          <input type=\"submit\" name=\"action-add\" value=\"Add To List\"><br>\n        </td>\n      </tr>";
    }
    
    $output .=  "\n  </table>\n\n  <script type=\"text/javascript\">\n    document.chartform.category[0].selected = true;\n    document.chartform.subcategory.disabled = '';\n    document.chartform.name.disabled = '';\n    catSelected();\n    subcatSelected();\n  </script>\n\n  <h3>List Of Data Sets To Plot</h3>\n";
    #line 258 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'lines', 0, 'size', 0]) > 0) {
    $output .=  "\n    <table cellspacing=\"2\" cellpadding=\"2\">\n      <tr>\n        <th style=\"width: 5em;\">Select</th>\n        <th>Label</th>\n        <th></th>\n        <th>Data Set</th>\n        <th></th>\n      </tr>\n      \n      ";
    #line 152 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('labelidx', 0);
    #line 153 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('newidx', 0);
    $output .=  "\n      ";
    #line 204 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($value, $error, $oldloop);
        my $list = $stash->get(['chart', 0, 'lines', 0]);
        
        unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
            $list = Template::Config->iterator($list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($value, $error) = $list->get_first();
        eval { $oldloop = $stash->get('loop') };
        $stash->set('loop', $list);
        eval {
    LOOP:   while (! $error) {
                $stash->{'line'} = $value;
    #line 162 "template/en/custom/reports/create-chart.html.tmpl"
    if (! $stash->get('line')) {
    $output .=  "\n          ";
    #line 160 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('labelidx', $stash->get('labelidx') + 1);
    #line 161 "template/en/custom/reports/create-chart.html.tmpl"
    ($value, $error) = $list->get_next();
    next LOOP;
    
    }
    
    $output .=  "\n        ";
    #line 201 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FOREACH 
    do {
        my ($value, $error, $oldloop);
        my $list = $stash->get('line');
        
        unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
            $list = Template::Config->iterator($list)
                || die $Template::Config::ERROR, "\n"; 
        }
    
        ($value, $error) = $list->get_first();
        eval { $oldloop = $stash->get('loop') };
        $stash->set('loop', $list);
        eval {
    LOOP:   while (! $error) {
                $stash->{'series'} = $value;
    $output .=  "\n          <tr>";
    #line 175 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['loop', 0, 'first', 0])) {
    $output .=  "\n              <td align=\"center\" rowspan=\"";
    #line 167 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get(['line', 0, 'size', 0]);
    $output .=  "\">\n                <input type=\"checkbox\" value=\"1\" name=\"select";
    #line 168 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\">\n              </td>\n              <td rowspan=\"";
    #line 170 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get(['line', 0, 'size', 0]);
    $output .=  "\">\n                <input type=\"text\" size=\"20\" name=\"label";
    #line 171 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\"\n                       value=\"";
    #line 172 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  ($stash->get(['chart', 0, 'labels', 0, $stash->get('labelidx'), 0]) || $stash->get(['series', 0, 'name', 0]));
        
        &$filter($output);
    };
    
    $output .=  "\">\n              </td>";
    }
    
    $output .=  "\n\n            <td>";
    #line 178 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['line', 0, 'size', 0]) > 1) {
    $output .=  '{';
    }
    
    $output .=  "\n            </td>\n\n            <td>";
    #line 182 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'category', 0]);
        
        &$filter($output);
    };
    
    $output .=  " / \n              ";
    #line 183 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'subcategory', 0]);
        
        &$filter($output);
    };
    
    $output .=  " /\n              ";
    #line 184 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'name', 0]);
        
        &$filter($output);
    };
    
    $output .=  "\n              <input type=\"hidden\" name=\"line";
    #line 185 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get('newidx');
    $output .=  "\" \n                     value=\"";
    #line 186 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "\">\n            </td>\n\n            <td align=\"center\">";
    #line 193 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['user', 0, 'id', 0]) eq $stash->get(['series', 0, 'creator', 0]) || $stash->get(['UserInGroup', [ 'admin' ]])) {
    $output .=  "\n               <a href=\"chart.cgi?action=edit&series_id=";
    #line 192 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "\">Edit</a> |";
    }
    
    $output .=  "\n              <a href=\"buglist.cgi?cmdtype=dorem&amp;namedcmd=";
    #line 195 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'category', 0]);
        
        &$filter($output);
    };
    
    $output .=  "%20/%20";
    #line 196 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'subcategory', 0]);
        
        &$filter($output);
    };
    
    $output .=  "%20/%20";
    #line 197 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('url_quote')
                  || $context->throw($context->error);
    
    $output .=  $stash->get(['series', 0, 'name', 0]);
        
        &$filter($output);
    };
    
    $output .=  "&amp;series_id=";
    #line 198 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $stash->get(['series', 0, 'series_id', 0]);
    $output .=  "&amp;remaction=runseries\">Run Search</a>\n            </td>        \n          </tr>";;
                ($value, $error) = $list->get_next();
            }
        };
        $stash->set('loop', $oldloop);
        die $@ if $@;
        $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
        die $error if $error;
    };
    
    #line 202 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('labelidx', $stash->get('labelidx') + 1);
    #line 203 "template/en/custom/reports/create-chart.html.tmpl"
    $stash->set('newidx', $stash->get('newidx') + 1);;
                ($value, $error) = $list->get_next();
            }
        };
        $stash->set('loop', $oldloop);
        die $@ if $@;
        $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
        die $error if $error;
    };
    
    $output .=  "\n";
    #line 222 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'gt', 0])) {
    $output .=  "\n        <tr>\n          <td align=\"center\">\n            <input type=\"checkbox\" value=\"1\" name=\"select65536\">\n            <input type=\"hidden\" value=\"1\" name=\"gt\">\n          </td>\n          <td>\n            <input type=\"text\" size=\"20\" name=\"labelgt\"\n                   value=\"";
    #line 214 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  ($stash->get(['chart', 0, 'labelgt', 0]) || $stash->get('gttext'));
        
        &$filter($output);
    };
    
    $output .=  "\">\n          </td>\n          <td></td>\n          <td>\n            <i>";
    #line 218 "template/en/custom/reports/create-chart.html.tmpl"
    
    # FILTER
    $output .=  do {
        my $output = '';
        my $filter = $context->filter('html')
                  || $context->throw($context->error);
    
    $output .=  $stash->get('gttext');
        
        &$filter($output);
    };
    
    $output .=  "</i>\n          </td>\n          <td></td>\n        </tr>";
    }
    
    $output .=  "\n      <tr>\n        <td colspan=\"6\">&nbsp;</td>\n      </tr>\n\n      <tr>\n        <td valign=\"bottom\" style=\"text-align: center;\">\n          <input type=\"submit\" name=\"action-sum\" value=\"Sum\" \n                 style=\"width: 5em;\"><br>\n          <input type=\"submit\" name=\"action-remove\" value=\"Remove\"\n                 style=\"width: 5em;\">\n        </td>\n\n        <td style=\"text-align: right; vertical-align: bottom;\">\n          <b>Cumulate:</b> \n          <input type=\"checkbox\" name=\"cumulate\" value=\"1\"";
    #line 238 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'cumulate', 0])) {
    $output .=  ' checked';
    }
    
    $output .=  ">\n        </td>\n\n        <td></td>\n        <td valign=\"bottom\"> \n          <b>Date Range:</b> \n          <input type=\"text\" size=\"12\" name=\"datefrom\" \n            value=\"";
    #line 245 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'datefrom', 0])) {
    $output .=  $stash->get(['time2str', [ '%Y-%m-%d', $stash->get(['chart', 0, 'datefrom', 0]) ]]);
    }
    
    $output .=  "\">\n          <b>to</b> \n          <input type=\"text\" size=\"12\" name=\"dateto\" \n            value=\"";
    #line 248 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['chart', 0, 'dateto', 0])) {
    $output .=  $stash->get(['time2str', [ '%Y-%m-%d', $stash->get(['chart', 0, 'dateto', 0]) ]]);
    }
    
    $output .=  "\">\n        </td>\n\n        <td style=\"text-align: right\" valign=\"bottom\">\n          <input type=\"submit\" name=\"action-wrap\" value=\"Chart This List\">\n        </td>\n      </tr>\n    </table>";
    }
    else {
    $output .=  "\n  <p><i>None</i></p>";
    }
    
    $output .=  "  \n</form>\n";
    #line 263 "template/en/custom/reports/create-chart.html.tmpl"
    if ($stash->get(['UserInGroup', [ 'editbugs' ]])) {
    $output .=  "\n  <h3><a href=\"query.cgi?format=create-series\">Create New Data Set</a></h3>";
    }
    
    $output .=  "                 \n";
    #line 265 "template/en/custom/reports/create-chart.html.tmpl"
    $output .=  $context->process('global/footer.html.tmpl');
    $output .=  "\n\n";
        } };
        if ($@) {
            $error = $context->catch($@, \$output);
            die $error unless $error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {

    },
});
