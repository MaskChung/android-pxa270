#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.15
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1174292726',
        'name' => 'account/cancel-token.txt.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $error;
        
        eval { BLOCK: {
    $output .=  "\n";
    $output .=  "\n";
    #line 23 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $context->process('global/variables.none.tmpl');
    $output .=  "\n\nFrom: bugzilla-daemon\@webkit.org\nTo: ";
    #line 26 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('emailaddress');
    $output .=  "\nSubject: ";
    #line 27 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $context->process('subject');
    $output .=  "\n\nA request was cancelled from ";
    #line 29 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('remoteaddress');
    $output .=  ".\n\nIf you did not request this, it could be either an honest\nmistake or someone attempting to break into your ";
    #line 32 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get(['terms', 0, 'Bugzilla', 0]);
    $output .=  " account.\n\nTake a look at the information below and forward this email\nto ";
    #line 35 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('maintainer');
    $output .=  " if you suspect foul play.\n\n            Token: ";
    #line 37 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('token');
    $output .=  "\n       Token Type: ";
    #line 38 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('tokentype');
    $output .=  "\n             User: ";
    #line 39 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('emailaddress');
    $output .=  "\n       Issue Date: ";
    #line 40 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('issuedate');
    $output .=  "\n       Event Data: ";
    #line 41 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $stash->get('eventdata');
    $output .=  "\nCancelled Because:";
    #line 43 "template/en/custom/account/cancel-token.txt.tmpl"
    $output .=  $context->process('cancelactionmessage');
    $output .=  "\n";
    
    $output .=  "\n";
    
    $output .=  "\n";
        } };
        if ($@) {
            $error = $context->catch($@, \$output);
            die $error unless $error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {
        'cancelactionmessage' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        #line 97 "template/en/custom/account/cancel-token.txt.tmpl"
        if ($stash->get('cancelaction') eq 'account_exists') {
        $output .=  "\n    Account ";
        #line 57 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('email');
        $output .=  " already exists.\n";
        }
        elsif ($stash->get('cancelaction') eq 'email_change_cancelled') {
        $output .=  "\n    The request to change the email address for\n    the ";
        #line 61 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('old_email');
        $output .=  " account to ";
        #line 61 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('new_email');
        $output .=  " has\n    been cancelled.\n";
        }
        elsif ($stash->get('cancelaction') eq 'email_change_cancelled_reinstated') {
        $output .=  "\n    The request to change the email address for your account\n    to ";
        #line 66 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('new_email');
        $output .=  " has been cancelled. Your old account\n    settings have been reinstated.\n";
        }
        elsif ($stash->get('cancelaction') eq 'emailold_change_cancelled') {
        $output .=  "\n    The request to change the email address for your account\n    to ";
        #line 71 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('new_email');
        $output .=  " has been cancelled.\n";
        }
        elsif ($stash->get('cancelaction') eq 'password_change_cancelled') {
        $output .=  "\n    You have requested cancellation.\n";
        }
        elsif ($stash->get('cancelaction') eq 'user_logged_in') {
        $output .=  "\n    You have logged in.\n";
        }
        elsif ($stash->get('cancelaction') eq 'wrong_token_for_changing_passwd') {
        $output .=  "\n    You have tried to use the token to change the password.\n";
        }
        elsif ($stash->get('cancelaction') eq 'wrong_token_for_cancelling_email_change') {
        $output .=  "\n    You have tried to use the token to cancel the email address change.\n";
        }
        elsif ($stash->get('cancelaction') eq 'wrong_token_for_confirming_email_change') {
        $output .=  "\n    You have tried to use the token to confirm the email address change.\n";
        }
        else {
        $output .=  "\n    ";
        $output .=  "\n    You are using ";
        #line 91 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get(['terms', 0, 'Bugzilla', 0]);
        $output .=  "'s cancel-token function incorrectly. You\n    passed in the string '";
        #line 92 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('cancelaction');
        $output .=  "'. The correct use is to pass\n    in a tag, and define that tag in the file cancel-token.txt.tmpl.\n\n    If you are a ";
        #line 95 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get(['terms', 0, 'Bugzilla', 0]);
        $output .=  " end-user seeing this message, please forward this\n    email to ";
        #line 96 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get(['Param', [ 'maintainer' ]]);
        $output .=  ".";
        }
        
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
        'subject' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        #line 52 "template/en/custom/account/cancel-token.txt.tmpl"
        if ($stash->get('tokentype') eq 'password') {
        $output .=  "\n    Password change request cancelled";
        }
        elsif ($stash->get('tokentype') eq 'emailnew' || $stash->get('tokentype') eq 'emailold') {
        $output .=  "\n    Email change request cancelled";
        }
        else {
        #line 51 "template/en/custom/account/cancel-token.txt.tmpl"
        $output .=  $stash->get('tokentype');
        $output .=  " token cancelled";
        }
        
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
    },
});
