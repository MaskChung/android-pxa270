#------------------------------------------------------------------------
# Compiled template generated by the Template Toolkit version 2.15
#------------------------------------------------------------------------

Template::Document->new({
    METADATA => {
        'modtime' => '1138010588',
        'name' => 'bug/dependency-tree.html.tmpl',
    },
    BLOCK => sub {
        my $context = shift || die "template sub called without context\n";
        my $stash   = $context->stash;
        my $output  = '';
        my $error;
        
        eval { BLOCK: {
    $output .=  "\n";
    $output .=  "\n";
    #line 24 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('global/variables.none.tmpl');
    $output .=  "\n";
    #line 0 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('global/header.html.tmpl', { 'title' => ("Dependency tree for " . $stash->get(['terms', 0, 'Bug', 0]) . " " . $stash->get('bugid')), 'h1' => ("Dependency tree for <a href=\"show_bug.cgi?id=" . $stash->get('bugid') . "\">" . $stash->get(['terms', 0, 'Bug', 0]) . " " . $stash->get('bugid') . "</a>") });
    $output .=  "\n";
    #line 31 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('depthControlToolbar');
    $output .=  "\n\n";
    $output .=  "\n<h3>";
    #line 39 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('hide_resolved')) {
    $output .=  "\n    Open ";
    #line 36 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bugs', 0]);
    }
    else {
    #line 38 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'Bugs', 0]);
    }
    
    $output .=  " \n  that <a href=\"show_bug.cgi?id=";
    #line 40 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "\">";
    #line 40 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bug', 0]);
    $output .=  " ";
    #line 40 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "</a> \n  depends on</h3>";
    #line 53 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get(['dependson_ids', 0, 'size', 0]) > 0) {
    $output .=  "\n  (";
    #line 44 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth')) {
    $output .=  "Up to ";
    #line 44 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('maxdepth');
    $output .=  " level";
    #line 44 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth') > 1) {
    $output .=  's';
    }
    
    $output .=  " deep | ";
    }
    
    $output .=  "\n  <a href=\"buglist.cgi?bug_id=";
    #line 45 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['dependson_ids', 0, 'join', [ ',' ]]);
    $output .=  "\">view as ";
    #line 45 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bug', 0]);
    $output .=  " list</a>";
    #line 48 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('canedit') && $stash->get(['dependson_ids', 0, 'size', 0]) > 1) {
    $output .=  "\n    | <a href=\"buglist.cgi?bug_id=";
    #line 47 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['dependson_ids', 0, 'join', [ ',' ]]);
    $output .=  "&amp;tweak=1\">change several</a>";
    }
    
    $output .=  ")";
    #line 49 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->include('display_tree', { 'tree' => $stash->get('dependson_tree'), 'bug_id' => $stash->get('bugid') });
    }
    else {
    $output .=  "\n  </h3>\n  <p>None</p>";
    }
    
    $output .=  "\n\n";
    $output .=  "\n<h3>";
    #line 61 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('hide_resolved')) {
    $output .=  "\n    Open ";
    #line 58 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bugs', 0]);
    }
    else {
    #line 60 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'Bugs', 0]);
    }
    
    $output .=  " \n  that <a href=\"show_bug.cgi?id=";
    #line 62 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "\">";
    #line 62 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bug', 0]);
    $output .=  " ";
    #line 62 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('bugid');
    $output .=  "</a> \n  blocks</h3>";
    #line 75 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get(['blocked_ids', 0, 'size', 0]) > 0) {
    $output .=  "\n  (";
    #line 66 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth')) {
    $output .=  "Up to ";
    #line 66 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get('maxdepth');
    $output .=  " level";
    #line 66 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('maxdepth') > 1) {
    $output .=  's';
    }
    
    $output .=  " deep | ";
    }
    
    $output .=  "\n  <a href=\"buglist.cgi?bug_id=";
    #line 67 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['blocked_ids', 0, 'join', [ ',' ]]);
    $output .=  "\">view as ";
    #line 67 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['terms', 0, 'bug', 0]);
    $output .=  " list</a>";
    #line 70 "template/en/custom/bug/dependency-tree.html.tmpl"
    if ($stash->get('canedit') && $stash->get(['blocked_ids', 0, 'size', 0]) > 1) {
    $output .=  "\n    | <a href=\"buglist.cgi?bug_id=";
    #line 69 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $stash->get(['blocked_ids', 0, 'join', [ ',' ]]);
    $output .=  "&amp;tweak=1\">change several</a>";
    }
    
    $output .=  ")";
    #line 71 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->include('display_tree', { 'tree' => $stash->get('blocked_tree'), 'bug_id' => $stash->get('bugid') });
    }
    else {
    $output .=  "\n  </h3>\n  <p>None</p>";
    }
    
    $output .=  "\n";
    #line 77 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('depthControlToolbar');
    $output .=  "\n";
    #line 79 "template/en/custom/bug/dependency-tree.html.tmpl"
    $output .=  $context->process('global/footer.html.tmpl');
    $output .=  "\n\n\n";
    $output .=  "\n";
    $output .=  "\n";
    $output .=  "\n";
    
    $output .=  "\n\n";
    $output .=  "\n";
    $output .=  "\n";
    $output .=  "\n\n <script type=\"text/javascript\">\nif (!Node) {\n    /* MSIE doesn't define Node, so provide a compatibility array */\n    var Node = { TEXT_NODE: 3, };\n}\n\nfunction toggleDisplay(node)\n{\n    var display = node.style.display;\n    if (display == \"none\") {\n        node.style.display =\n           (\"oldDisplay\" in node) ? node.oldDisplay : \"block\";\n        return true;\n    }\n\n    node.oldDisplay = display;\n    node.style.display = \"none\";\n    return false;\n}\n\nfunction listToggle(event)\n{\n    var node = event.target;\n    if (node.nodeType == Node.TEXT_NODE)\n        node = node.parentNode;\n    var toggle = node.nextSibling;\n    while (toggle && toggle.tagName != \"UL\")\n      toggle = toggle.nextSibling;\n    if (toggle) {\n      node.firstChild.data = toggleDisplay(toggle) ? \"[-]\" : \"[+]\";\n    }\n}\n\n </script>";
    
    $output .=  "\n";
        } };
        if ($@) {
            $error = $context->catch($@, \$output);
            die $error unless $error->type eq 'return';
        }
    
        return $output;
    },
    DEFBLOCKS => {
        'depthControlToolbar' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        $output .=  "\n <table cellpadding=\"3\" border=\"0\" cellspacing=\"0\" bgcolor=\"#d0d0d0\">\n <tr>\n   ";
        $output .=  "\n   <td align=\"center\">\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n           style=\"display: inline; margin: 0px;\">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 158 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">";
        #line 161 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('maxdepth')) {
        $output .=  "\n       <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 160 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth');
        $output .=  "\">";
        }
        
        $output .=  "\n     <input type=\"hidden\" name=\"hide_resolved\" value=\"";
        #line 162 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved') ? 0 : 1;
        $output .=  "\">\n     <input type=\"submit\" \n            value=\"";
        #line 164 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('hide_resolved')) {
        $output .=  "Show";
        }
        else {
        $output .=  "Hide";
        }
        
        $output .=  " Resolved\">\n   </form>\n   </td>\n\n   <td>\n     Max Depth:\n   </td>\n\n   <td>\n     &nbsp;\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input type=\"submit\" value=\"&nbsp;1&nbsp;\" ";
        #line 181 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('realdepth') < 2 || $stash->get('maxdepth') eq 1) {
        $output .=  'disabled';
        }
        
        $output .=  ">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 182 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"maxdepth\" type=\"hidden\" value=\"1\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 184 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 193 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 194 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') eq 1 ? 1 : ($stash->get('maxdepth') ? $stash->get('maxdepth') - 1 : $stash->get('realdepth') - 1);
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 198 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;&lt;&nbsp;\" ";
        #line 200 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('realdepth') < 2 || ($stash->get('maxdepth') && $stash->get('maxdepth') < 2)) {
        $output .=  'disabled';
        }
        
        $output .=  ">\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"maxdepth\" size=\"4\" maxlength=\"4\" value=\"";
        #line 209 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') > 0 && $stash->get('maxdepth') <= $stash->get('realdepth') ? $stash->get('maxdepth') : '';
        $output .=  "\">\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 212 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 213 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <noscript>\n       <input type=\"submit\" value=\"Change\" ";
        #line 215 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('realdepth') < 2) {
        $output .=  'disabled';
        }
        
        $output .=  ">\n     </noscript>\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 225 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">";
        #line 228 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('maxdepth')) {
        $output .=  "\n       <input name=\"maxdepth\" type=\"hidden\" value=\"";
        #line 227 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('maxdepth') + 1;
        $output .=  "\">";
        }
        
        $output .=  "\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 229 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;&gt;&nbsp;\" ";
        #line 231 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('realdepth') < 2 || ! $stash->get('maxdepth') || $stash->get('maxdepth') >= $stash->get('realdepth')) {
        $output .=  'disabled';
        }
        
        $output .=  "\n    %]>\n   </form>\n   </td>\n\n   <td>\n   <form method=\"get\" action=\"showdependencytree.cgi\"\n         style=\"display: inline; margin: 0px;\">\n     ";
        $output .=  "\n     <input name=\"id\" type=\"hidden\" value=\"";
        #line 240 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('bugid');
        $output .=  "\">\n     <input name=\"hide_resolved\" type=\"hidden\" value=\"";
        #line 241 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('hide_resolved');
        $output .=  "\">\n     <input type=\"submit\" value=\"&nbsp;Unlimited&nbsp;\"";
        #line 243 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get('maxdepth') eq 0 || $stash->get('maxdepth') eq $stash->get('realdepth')) {
        $output .=  'disabled';
        }
        
        $output .=  ">\n   </form>\n   </td>\n </tr>\n</table>\n";
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
        'display_tree' => sub {
            my $context = shift || die "template sub called without context\n";
            my $stash   = $context->stash;
            my $output  = '';
            my $error;
            
            eval { BLOCK: {
        #line 87 "template/en/custom/bug/dependency-tree.html.tmpl"
        $stash->set(['tree', 0, $stash->get('bug_id'), 0, 'seen', 0], 1);
        $output .=  "\n<ul>";
        #line 108 "template/en/custom/bug/dependency-tree.html.tmpl"
        
        # FOREACH 
        do {
            my ($value, $error, $oldloop);
            my $list = $stash->get(['tree', 0, $stash->get('bug_id'), 0, 'dependencies', 0]);
            
            unless (UNIVERSAL::isa($list, 'Template::Iterator')) {
                $list = Template::Config->iterator($list)
                    || die $Template::Config::ERROR, "\n"; 
            }
        
            ($value, $error) = $list->get_first();
            eval { $oldloop = $stash->get('loop') };
            $stash->set('loop', $list);
            eval {
        LOOP:   while (! $error) {
                    $stash->{'dep_id'} = $value;
        #line 90 "template/en/custom/bug/dependency-tree.html.tmpl"
        $stash->set('dep', $stash->get(['tree', 0, $stash->get('dep_id'), 0]));
        $output .=  "\n    <li>";
        #line 92 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'dependencies', 0, 'size', 0]) > 0 && ! $stash->get(['dep', 0, 'seen', 0])) {
        $output .=  ('' . "<script>document.write('<a href=\"#\" class=\"toggle\" onclick=\"listToggle(event); return false\">[-]</a>')</script>");
        }
        
        #line 94 "template/en/custom/bug/dependency-tree.html.tmpl"
        $stash->set('isclosed', ! $stash->get(['dep', 0, 'open', 0]));
        #line 104 "template/en/custom/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('closed', [ $stash->get('isclosed') ])
                      || $context->throw($context->error);
        
        $output .=  "\n      <a href=\"show_bug.cgi?id=";
        #line 96 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('dep_id');
        $output .=  "\">";
        #line 96 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get('dep_id');
        $output .=  "\n        [";
        #line 97 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'milestone', 0])) {
        #line 97 "template/en/custom/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'milestone', 0]);
            
            &$filter($output);
        };
        
        $output .=  ", ";
        }
        
        #line 98 "template/en/custom/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'assignee_email', 0]);
            
            &$filter($output);
        };
        
        $output .=  "] -";
        #line 103 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'seen', 0])) {
        $output .=  "\n          <i>This ";
        #line 100 "template/en/custom/bug/dependency-tree.html.tmpl"
        $output .=  $stash->get(['terms', 0, 'bug', 0]);
        $output .=  " appears elsewhere in this tree.</i></a>";
        }
        else {
        $output .=  "\n          ";
        #line 102 "template/en/custom/bug/dependency-tree.html.tmpl"
        
        # FILTER
        $output .=  do {
            my $output = '';
            my $filter = $context->filter('html')
                      || $context->throw($context->error);
        
        $output .=  $stash->get(['dep', 0, 'summary', 0]);
            
            &$filter($output);
        };
        
        $output .=  ".</a>";
        }
        
            
            &$filter($output);
        };
        
        #line 105 "template/en/custom/bug/dependency-tree.html.tmpl"
        if ($stash->get(['dep', 0, 'dependencies', 0, 'size', 0]) > 0 && ! $stash->get(['dep', 0, 'seen', 0])) {
        $output .=  $context->include('display_tree', { 'bug_id' => $stash->get('dep_id') });
        }
        
        $output .=  "\n    </li>";;
                    ($value, $error) = $list->get_next();
                }
            };
            $stash->set('loop', $oldloop);
            die $@ if $@;
            $error = 0 if $error && $error eq Template::Constants::STATUS_DONE;
            die $error if $error;
        };
        
        $output .=  "\n</ul>";
            } };
            if ($@) {
                $error = $context->catch($@, \$output);
                die $error unless $error->type eq 'return';
            }
        
            return $output;
        },
    },
});
