<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SGL: SkWidgetViews.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">skia</a></div>
<h1>SkWidgetViews.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef SkWidgetViews_DEFINED</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SkWidgetViews_DEFINED</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "SkView.h"</span>
00005 
00006 
00007 <span class="keyword">enum</span> SkWidgetEnum {
00008         kBorder_WidgetEnum,                     
00009         kButton_WidgetEnum,                     
00010         kImage_WidgetEnum,                      
00011         kList_WidgetEnum,                       
00012         kProgress_WidgetEnum,           
00013         kScroll_WidgetEnum,                     
00014         kText_WidgetEnum,                       
00015         
00016         kWidgetEnumCount
00017 };
00018 
00019 <span class="comment">//determines which skin to use</span>
00020 <span class="keyword">enum</span> SkinEnum {
00021         kBorder_SkinEnum,
00022         kButton_SkinEnum,
00023         kProgress_SkinEnum,
00024         kScroll_SkinEnum,
00025         kStaticText_SkinEnum,
00026         
00027         kSkinEnumCount
00028 };
00029 
00030 <span class="preprocessor">#include "SkAnimator.h"</span>
00031 <span class="comment">//used for inflates</span>
00032 <span class="keyword">const</span> <span class="keywordtype">char</span>* get_skin_enum_path(SkinEnum se);
00033 <span class="keywordtype">void</span> init_skin_anim(<span class="keyword">const</span> <span class="keywordtype">char</span> path[], <a class="code" href="classSkAnimator.html">SkAnimator</a>* anim);
00034 <span class="keywordtype">void</span> init_skin_anim(SkinEnum se, <a class="code" href="classSkAnimator.html">SkAnimator</a>* anim);
00035 <span class="keywordtype">void</span> init_skin_paint(SkinEnum se, <a class="code" href="classSkPaint.html">SkPaint</a>* paint);
00036 <span class="keywordtype">void</span> inflate_paint(<span class="keyword">const</span> SkDOM&amp; dom, <span class="keyword">const</span> SkDOM::Node* node, <a class="code" href="classSkPaint.html">SkPaint</a>* paint);
00037 
00041 <a class="code" href="classSkView.html">SkView</a>* SkWidgetFactory(SkWidgetEnum);
00046 <a class="code" href="classSkView.html">SkView</a>* SkWidgetFactory(<span class="keyword">const</span> <span class="keywordtype">char</span> name[]);
00047 
00049 
00050 <span class="keyword">class </span>SkWidgetView : <span class="keyword">public</span> <a class="code" href="classSkView.html">SkView</a> {
00051 <span class="keyword">public</span>:
00052         SkWidgetView();
00053 
00054         <span class="keyword">const</span> <span class="keywordtype">char</span>*     getLabel() <span class="keyword">const</span>;
00055         <span class="keywordtype">void</span>            getLabel(<a class="code" href="classSkString.html">SkString</a>* label) <span class="keyword">const</span>;
00056 
00057         <span class="keywordtype">void</span>            setLabel(<span class="keyword">const</span> <span class="keywordtype">char</span>[]);
00058         <span class="keywordtype">void</span>            setLabel(<span class="keyword">const</span> <span class="keywordtype">char</span>[], size_t len);
00059         <span class="keywordtype">void</span>            setLabel(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp;);
00060 
00061         <a class="code" href="classSkEvent.html">SkEvent</a>&amp;                event() { <span class="keywordflow">return</span> fEvent; }
00062         <span class="keyword">const</span> <a class="code" href="classSkEvent.html">SkEvent</a>&amp;  event()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fEvent; }
00063 
00066         <span class="keywordtype">bool</span>    postWidgetEvent();
00067         
00070         <span class="keyword">static</span> SkEventSinkID GetWidgetEventSinkID(<span class="keyword">const</span> <a class="code" href="classSkEvent.html">SkEvent</a>&amp;);
00071 
00072 <span class="keyword">protected</span>:
00076         <span class="keyword">virtual</span> <span class="keywordtype">void</span> onLabelChange(<span class="keyword">const</span> <span class="keywordtype">char</span> oldLabel[], <span class="keyword">const</span> <span class="keywordtype">char</span> newLabel[]);
00083         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> onPrepareWidgetEvent(<a class="code" href="classSkEvent.html">SkEvent</a>* evt);
00084 
00085         <span class="comment">// overrides</span>
00086         <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classSkView.html#a50">onInflate</a>(<span class="keyword">const</span> SkDOM&amp; dom, <span class="keyword">const</span> SkDOM::Node*);
00087         
00088 <span class="keyword">private</span>:
00089         <a class="code" href="classSkString.html">SkString</a>        fLabel;
00090         <a class="code" href="classSkEvent.html">SkEvent</a>         fEvent;
00091         
00092         <span class="keyword">typedef</span> <a class="code" href="classSkView.html">SkView</a> INHERITED;
00093 };
00094 
00096 
00097 <span class="keyword">class </span>SkButtonView : <span class="keyword">public</span> SkWidgetView {
00098 <span class="keyword">public</span>:
00099         <span class="comment">// inflate: "sk-button"</span>
00100         
00101 <span class="keyword">protected</span>:
00102         <span class="comment">// overrides</span>
00103         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> onEvent(<span class="keyword">const</span> <a class="code" href="classSkEvent.html">SkEvent</a>&amp;);
00104 };
00105 
00107 
00108 <span class="keyword">class </span>SkCheckButtonView : <span class="keyword">public</span> SkWidgetView {
00109 <span class="keyword">public</span>:
00110         SkCheckButtonView();
00111 
00112         <span class="comment">// inflate: "sk-checkbutton"</span>
00113         
00114         <span class="keyword">enum</span> CheckState {
00115                 kOff_CheckState,                
00116                 kOn_CheckState,                 
00117                 kUnknown_CheckState             
00118         };
00119         CheckState      getCheckState()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (CheckState)fCheckState; }
00120         <span class="keywordtype">void</span>            setCheckState(CheckState);
00121 
00127         static <span class="keywordtype">bool</span> GetWidgetEventCheckState(const <a class="code" href="classSkEvent.html">SkEvent</a>&amp;, CheckState* state);
00128 
00129 protected:
00130         <span class="comment">// called when the check-state is about to change, but before it actually has</span>
00131         virtual <span class="keywordtype">void</span> onCheckStateChange(CheckState oldState, CheckState newState);
00132 
00133         <span class="comment">// overrides</span>
00134         virtual <span class="keywordtype">void</span> onInflate(const SkDOM&amp; dom, const SkDOM::Node*);
00135         virtual <span class="keywordtype">bool</span> onPrepareWidgetEvent(SkEvent* evt);
00136         
00137 private:
00138         U8      fCheckState;
00139         
00140         typedef SkWidgetView INHERITED;
00141 };
00142 
00144 #include "<a class="code" href="classSkTextBox.html">SkTextBox</a>.h"
00145 
00146 class SkStaticTextView : public <a class="code" href="classSkView.html">SkView</a> {
00147 <span class="keyword">public</span>:
00148                         SkStaticTextView();
00149         <span class="keyword">virtual</span> ~SkStaticTextView();
00150 
00151         <span class="keyword">enum</span> Mode {
00152                 kFixedSize_Mode,
00153                 kAutoWidth_Mode,
00154                 kAutoHeight_Mode,
00155 
00156                 kModeCount
00157         };
00158         Mode    getMode()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (Mode)fMode; }
00159         <span class="keywordtype">void</span>    setMode(Mode);
00160 
00161         <a class="code" href="classSkTextBox.html">SkTextBox</a>::SpacingAlign getSpacingAlign()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (SkTextBox::SpacingAlign)fSpacingAlign; }
00162         <span class="keywordtype">void</span>    setSpacingAlign(<a class="code" href="classSkTextBox.html">SkTextBox</a>::SpacingAlign);
00163 
00164         <span class="keywordtype">void</span>    getMargin(SkPoint* margin) const;
00165         <span class="keywordtype">void</span>    setMargin(SkScalar dx, SkScalar dy);
00166 
00167         size_t  getText(<a class="code" href="classSkString.html">SkString</a>* text = nil) const;
00168         size_t  getText(<span class="keywordtype">char</span> text[] = nil) const;
00169         <span class="keywordtype">void</span>    setText(const <a class="code" href="classSkString.html">SkString</a>&amp;);
00170         <span class="keywordtype">void</span>    setText(const <span class="keywordtype">char</span> text[]);
00171         <span class="keywordtype">void</span>    setText(const <span class="keywordtype">char</span> text[], size_t len);
00172 
00173         <span class="keywordtype">void</span>    getPaint(<a class="code" href="classSkPaint.html">SkPaint</a>*) const;
00174         <span class="keywordtype">void</span>    setPaint(const <a class="code" href="classSkPaint.html">SkPaint</a>&amp;);
00175 
00176 protected:
00177         <span class="comment">// overrides</span>
00178         virtual <span class="keywordtype">void</span> onDraw(<a class="code" href="classSkCanvas.html">SkCanvas</a>*);
00179         virtual <span class="keywordtype">void</span> onInflate(const SkDOM&amp; dom, const SkDOM::Node*);
00180 
00181 private:
00182         SkPoint         fMargin;
00183         SkString        fText;
00184         SkPaint         fPaint;
00185         U8                      fMode;
00186         U8                      fSpacingAlign;
00187 
00188         <span class="keywordtype">void</span> computeSize();
00189 
00190         typedef SkView INHERITED;
00191 };
00192 
00194 
00195 class <a class="code" href="classSkAnimator.html">SkAnimator</a>;
00196 class SkListSource;
00197 class SkScrollBarView;
00198 
00199 class SkListView : public SkWidgetView {
00200 <span class="keyword">public</span>:
00201                         SkListView();
00202         <span class="keyword">virtual</span> ~SkListView();
00203 
00204         <span class="keywordtype">bool</span>    hasScrollBar()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fScrollBar != nil; }
00205         <span class="keywordtype">void</span>    setHasScrollBar(<span class="keywordtype">bool</span>);
00206         
00209         <span class="keywordtype">int</span>             getVisibleRowCount()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fVisibleRowCount; }
00212         <span class="keywordtype">int</span>             getSelection()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fCurrIndex; }
00215         <span class="keywordtype">void</span>    setSelection(<span class="keywordtype">int</span>);
00220         <span class="keywordtype">bool</span>    moveSelectionUp();
00225         <span class="keywordtype">bool</span>    moveSelectionDown();
00226 
00227         SkListSource*   getListSource()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fSource; }
00228         SkListSource*   setListSource(SkListSource*);
00229 
00234         <span class="keyword">static</span> <span class="keywordtype">int</span> GetWidgetEventListIndex(<span class="keyword">const</span> SkEvent&amp;);
00235 
00236 <span class="keyword">protected</span>:
00237         <span class="comment">// overrides</span>
00238         <span class="keyword">virtual</span> <span class="keywordtype">void</span> onDraw(SkCanvas*);
00239         <span class="keyword">virtual</span> <span class="keywordtype">void</span> onSizeChange();
00240         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> onEvent(<span class="keyword">const</span> SkEvent&amp;);
00241         <span class="keyword">virtual</span> <span class="keywordtype">void</span> onInflate(<span class="keyword">const</span> SkDOM&amp; dom, <span class="keyword">const</span> SkDOM::Node* node);
00242         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> onPrepareWidgetEvent(SkEvent*);
00243 
00244 <span class="keyword">private</span>:
00245         <span class="keyword">enum</span> DirtyFlags {
00246                 kAnimCount_DirtyFlag    = 0x01,
00247                 kAnimContent_DirtyFlag  = 0x02
00248         };
00249         <span class="keywordtype">void</span>    dirtyCache(<span class="keywordtype">unsigned</span> dirtyFlags);
00250         <span class="keywordtype">bool</span>    ensureCache();
00251 
00252         <span class="keywordtype">int</span>             logicalToVisualIndex(<span class="keywordtype">int</span> index)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> index - fScrollIndex; }
00253         <span class="keywordtype">void</span>    invalSelection();
00254         SkScalar getContentWidth() <span class="keyword">const</span>;
00255         <span class="keywordtype">bool</span>    getRowRect(<span class="keywordtype">int</span> index, SkRect*) <span class="keyword">const</span>;
00256         <span class="keywordtype">void</span>    ensureSelectionIsVisible();
00257         <span class="keywordtype">void</span>    ensureVisibleRowCount();
00258 
00259         <span class="keyword">struct </span>BindingRec;
00260 
00261         <span class="keyword">enum</span> Heights {
00262                 kNormal_Height,
00263                 kSelected_Height
00264         };
00265         SkListSource*   fSource;
00266         SkScrollBarView*        fScrollBar;
00267         SkAnimator*             fAnims;
00268         BindingRec*             fBindings;
00269         SkString                fSkinName;
00270         SkScalar                fHeights[2];
00271         S16                             fScrollIndex, fCurrIndex;
00272         U16                             fVisibleRowCount, fBindingCount;
00273         SkBool8                 fAnimContentDirty;
00274         SkBool8                 fAnimFocusDirty;
00275 
00276         <span class="keyword">typedef</span> SkWidgetView INHERITED;
00277 };
00278 
00279 <span class="keyword">class </span>SkListSource : <span class="keyword">public</span> <a class="code" href="classSkRefCnt.html">SkRefCnt</a> {
00280 <span class="keyword">public</span>:
00281         <span class="keyword">virtual</span> <span class="keywordtype">int</span> countFields();
00282         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getFieldName(<span class="keywordtype">int</span> index, <a class="code" href="classSkString.html">SkString</a>* field);
00284         <span class="keyword">virtual</span> <span class="keywordtype">int</span> findFieldIndex(<span class="keyword">const</span> <span class="keywordtype">char</span> field[]);
00285 
00286         <span class="keyword">virtual</span> <span class="keywordtype">int</span>     countRecords();
00287         <span class="keyword">virtual</span> <span class="keywordtype">void</span> getRecord(<span class="keywordtype">int</span> rowIndex, <span class="keywordtype">int</span> fieldIndex, <a class="code" href="classSkString.html">SkString</a>* data);
00288 
00289         <span class="keyword">virtual</span> <span class="keywordtype">bool</span> prepareWidgetEvent(SkEvent*, <span class="keywordtype">int</span> rowIndex);
00290         
00291         <span class="keyword">static</span> SkListSource* Factory(<span class="keyword">const</span> <span class="keywordtype">char</span> name[]);
00292 };
00293 
00294 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 9 14:35:23 2006 for SGL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
