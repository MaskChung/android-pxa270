<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SGL: SkEvent.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">skia</a></div>
<h1>SkEvent.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef SkEvent_DEFINED</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SkEvent_DEFINED</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "SkDOM.h"</span>
00005 <span class="preprocessor">#include "SkMetaData.h"</span>
00006 <span class="preprocessor">#include "SkString.h"</span>
00007 
00008 <span class="comment">//class SkOSWindow;</span>
00009 
00015 <span class="keyword">typedef</span> U32 SkEventSinkID;
00016 
<a name="l00023"></a><a class="code" href="classSkEvent.html">00023</a> <span class="keyword">class </span><a class="code" href="classSkEvent.html">SkEvent</a> {
00024 <span class="keyword">public</span>:
00027         <a class="code" href="classSkEvent.html#a0">SkEvent</a>();
00030         <span class="keyword">explicit</span> <a class="code" href="classSkEvent.html#a0">SkEvent</a>(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; type);
00033         <span class="keyword">explicit</span> <a class="code" href="classSkEvent.html#a0">SkEvent</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> type[]);
00036         <a class="code" href="classSkEvent.html#a0">SkEvent</a>(<span class="keyword">const</span> <a class="code" href="classSkEvent.html">SkEvent</a>&amp; src);
00037         ~<a class="code" href="classSkEvent.html">SkEvent</a>();
00038 
00039 <span class="comment">//      /**     Return the event's type (will never be nil) */</span>
00040 <span class="comment">//      const char*     getType() const;</span>
00042 <span class="comment"></span>        <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a5">getType</a>(<a class="code" href="classSkString.html">SkString</a>* str) <span class="keyword">const</span>;
00044         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a6">isType</a>(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; str) <span class="keyword">const</span>;
00046         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a6">isType</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> type[], size_t len = 0) <span class="keyword">const</span>;
00050         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a8">setType</a>(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp;);
00054         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a8">setType</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> type[], size_t len = 0);
00055 
<a name="l00057"></a><a class="code" href="classSkEvent.html#a10">00057</a>         U32             <a class="code" href="classSkEvent.html#a10">getFast32</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> f32; }
<a name="l00061"></a><a class="code" href="classSkEvent.html#a11">00061</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a11">setFast32</a>(U32 x) { f32 = x; }
00062 
<a name="l00067"></a><a class="code" href="classSkEvent.html#a12">00067</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a12">findS32</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], S32* value = nil)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findS32(name, value); }
<a name="l00072"></a><a class="code" href="classSkEvent.html#a13">00072</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a13">findScalar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], SkScalar* value = nil)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findScalar(name, value); }
<a name="l00077"></a><a class="code" href="classSkEvent.html#a14">00077</a>         <span class="keyword">const</span> SkScalar* <a class="code" href="classSkEvent.html#a14">findScalars</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">int</span>* count, SkScalar values[] = nil)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findScalars(name, count, values); }
<a name="l00080"></a><a class="code" href="classSkEvent.html#a15">00080</a>         <span class="keyword">const</span> <span class="keywordtype">char</span>*     <a class="code" href="classSkEvent.html#a15">findString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[])<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findString(name); }
<a name="l00085"></a><a class="code" href="classSkEvent.html#a16">00085</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a16">findPtr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">void</span>** value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findPtr(name, value); }
00086         <span class="keywordtype">bool</span>    findBool(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">bool</span>* value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.findBool(name, value); }
00087 
<a name="l00089"></a><a class="code" href="classSkEvent.html#a18">00089</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a18">hasS32</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], S32 value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.hasS32(name, value); }
<a name="l00091"></a><a class="code" href="classSkEvent.html#a19">00091</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a19">hasScalar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], SkScalar value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.hasScalar(name, value); }
<a name="l00093"></a><a class="code" href="classSkEvent.html#a20">00093</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a20">hasString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keyword">const</span> <span class="keywordtype">char</span> value[])<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.hasString(name, value); }
<a name="l00095"></a><a class="code" href="classSkEvent.html#a21">00095</a>         <span class="keywordtype">bool</span>    <a class="code" href="classSkEvent.html#a21">hasPtr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">void</span>* value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.hasPtr(name, value); }
00096         <span class="keywordtype">bool</span>    hasBool(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">bool</span> value)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta.hasBool(name, value); }
00097 
<a name="l00099"></a><a class="code" href="classSkEvent.html#a23">00099</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a23">setS32</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], S32 value) { fMeta.setS32(name, value); }
<a name="l00101"></a><a class="code" href="classSkEvent.html#a24">00101</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a24">setScalar</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], SkScalar value) { fMeta.setScalar(name, value); }
<a name="l00103"></a><a class="code" href="classSkEvent.html#a25">00103</a>         SkScalar* <a class="code" href="classSkEvent.html#a25">setScalars</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">int</span> count, <span class="keyword">const</span> SkScalar values[] = nil) { <span class="keywordflow">return</span> fMeta.setScalars(name, count, values); }
<a name="l00105"></a><a class="code" href="classSkEvent.html#a26">00105</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a26">setString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; value) { fMeta.setString(name, value.c_str()); }
<a name="l00107"></a><a class="code" href="classSkEvent.html#a27">00107</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a26">setString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keyword">const</span> <span class="keywordtype">char</span> value[]) { fMeta.setString(name, value); }
<a name="l00109"></a><a class="code" href="classSkEvent.html#a28">00109</a>         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a28">setPtr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">void</span>* value) { fMeta.setPtr(name, value); }
00110         <span class="keywordtype">void</span>    setBool(<span class="keyword">const</span> <span class="keywordtype">char</span> name[], <span class="keywordtype">bool</span> value) { fMeta.setBool(name, value); }
00111 
<a name="l00113"></a><a class="code" href="classSkEvent.html#a30">00113</a>         SkMetaData&amp;                     <a class="code" href="classSkEvent.html#a30">getMetaData</a>() { <span class="keywordflow">return</span> fMeta; }
<a name="l00115"></a><a class="code" href="classSkEvent.html#a31">00115</a>         <span class="keyword">const</span> SkMetaData&amp;       <a class="code" href="classSkEvent.html#a30">getMetaData</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fMeta; }
00116 
00117         <span class="keywordtype">void</span> tron() { <a class="code" href="classSkEvent.html#a36">SkDEBUGCODE</a>(fDebugTrace = <span class="keyword">true</span>;) }
00118         <span class="keywordtype">void</span> troff() { <a class="code" href="classSkEvent.html#a36">SkDEBUGCODE</a>(fDebugTrace = <span class="keyword">false</span>;) }
00119         <span class="keywordtype">bool</span> isDebugTrace()<span class="keyword"> const</span>
00120 <span class="keyword">        </span>{
00121 <span class="preprocessor">#ifdef SK_DEBUG</span>
00122 <span class="preprocessor"></span>                <span class="keywordflow">return</span> fDebugTrace;
00123 <span class="preprocessor">#else</span>
00124 <span class="preprocessor"></span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;
00125 <span class="preprocessor">#endif</span>
00126 <span class="preprocessor"></span>        }
00127 
00129         <span class="keywordtype">void</span>    <a class="code" href="classSkEvent.html#a35">inflate</a>(<span class="keyword">const</span> SkDOM&amp;, <span class="keyword">const</span> SkDOM::Node*);
00130 
00131         <a class="code" href="classSkEvent.html#a36">SkDEBUGCODE</a>(<span class="keywordtype">void</span> dump(<span class="keyword">const</span> <span class="keywordtype">char</span> title[] = nil);)
00132 
00133         
00138         static <span class="keywordtype">bool</span>     Post(<a class="code" href="classSkEvent.html">SkEvent</a>* evt, SkEventSinkID targetID, SkMSec delay = 0);
00144         static <span class="keywordtype">bool</span>     PostTime(<a class="code" href="classSkEvent.html">SkEvent</a>* evt, SkEventSinkID targetID, SkMSec time);
00145 
<a name="l00150"></a><a class="code" href="classSkEvent.html#a37">00150</a>         <span class="keywordtype">bool</span> post(SkEventSinkID sinkID, SkMSec delay = 0)
00151         {
00152                 <span class="keywordflow">return</span> SkEvent::Post(<span class="keyword">this</span>, sinkID, delay);
00153         }
00154 
00155         <span class="keywordtype">void</span> postTime(SkEventSinkID sinkID, SkMSec time)
00156         {
00157                 <a class="code" href="classSkEvent.html#e0">SkEvent::PostTime</a>(<span class="keyword">this</span>, sinkID, time);
00158         }
00159 
00161 
00162 
00163 
00168         <span class="keyword">static</span> <span class="keywordtype">void</span>             <a class="code" href="classSkEvent.html#e1">Init</a>();
00172         <span class="keyword">static</span> <span class="keywordtype">void</span>             <a class="code" href="classSkEvent.html#e2">Term</a>();
00173 
00177         <span class="keyword">static</span> <span class="keywordtype">bool</span>             <a class="code" href="classSkEvent.html#e3">ProcessEvent</a>();
00182         <span class="keyword">static</span> <span class="keywordtype">void</span>             <a class="code" href="classSkEvent.html#e4">ServiceQueueTimer</a>();
00183 
00185 
00186 
00187 
00191         <span class="keyword">static</span> <span class="keywordtype">void</span>     <a class="code" href="classSkEvent.html#e5">SignalNonEmptyQueue</a>();
00195         <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="classSkEvent.html#e6">SignalQueueTimer</a>(SkMSec delay);
00196 
00197 <span class="preprocessor">#ifndef SK_USE_WXWIDGETS</span>
00198 <span class="preprocessor"></span><span class="preprocessor">#ifdef SK_BUILD_FOR_WIN</span>
00199 <span class="preprocessor"></span>        <span class="keyword">static</span> <span class="keywordtype">bool</span> WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);
00200 <span class="preprocessor">#elif defined(SK_BUILD_FOR_UNIXx)</span>
00201 <span class="preprocessor"></span>  <span class="keyword">static</span> U32 HandleTimer(U32, <span class="keywordtype">void</span>*);
00202   <span class="keyword">static</span> <span class="keywordtype">bool</span> WndProc(Display*, Window, XEvent&amp;);
00203 <span class="preprocessor">#endif</span>
00204 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00205 <span class="preprocessor"></span>        <span class="comment">// Don't know yet what this will be</span>
00206         <span class="comment">//static bool CustomEvent();</span>
00207 <span class="preprocessor">#endif</span>
00208 <span class="preprocessor"></span>
00209 <span class="keyword">private</span>:
00210         SkMetaData              fMeta;
00211         <span class="keyword">mutable</span> <span class="keywordtype">char</span>*   fType;  <span class="comment">// may be characters with low bit set to know that it is not a pointer</span>
00212         U32                             f32;
00213         <a class="code" href="classSkEvent.html#a36">SkDEBUGCODE</a>(<span class="keywordtype">bool</span> fDebugTrace;)
00214 
00215         <span class="comment">// these are for our implementation of the event queue</span>
00216         SkEventSinkID   fTargetID;
00217         SkMSec                  fTime;
00218         <a class="code" href="classSkEvent.html">SkEvent</a>*                fNextEvent;     <span class="comment">// either in the delay or normal event queue</span>
00219         <span class="keywordtype">void</span> initialize(<span class="keyword">const</span> <span class="keywordtype">char</span>* type, size_t typeLen);
00220 
00221         <span class="keyword">static</span> <span class="keywordtype">bool</span> Enqueue(<a class="code" href="classSkEvent.html">SkEvent</a>* evt);
00222         <span class="keyword">static</span> SkMSec EnqueueTime(<a class="code" href="classSkEvent.html">SkEvent</a>* evt, SkMSec time);
00223         <span class="keyword">static</span> <a class="code" href="classSkEvent.html">SkEvent</a>* Dequeue(SkEventSinkID* targetID);
00224         <span class="keyword">static</span> <span class="keywordtype">bool</span>             QHasEvents();
00225 };
00226 
00227 <span class="preprocessor">#endif</span>
00228 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 9 14:35:23 2006 for SGL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
