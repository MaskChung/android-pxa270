<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SGL: SkShader.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">skia</a></div>
<h1>SkShader.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef SkShader_DEFINED</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SkShader_DEFINED</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "SkRefCnt.h"</span>
00005 <span class="preprocessor">#include "SkBitmap.h"</span>
00006 <span class="preprocessor">#include "SkMask.h"</span>
00007 <span class="preprocessor">#include "SkMatrix.h"</span>
00008 <span class="preprocessor">#include "SkPaint.h"</span>
00009 
00010 <span class="keyword">class </span><a class="code" href="classSkPath.html">SkPath</a>;
00011 
<a name="l00019"></a><a class="code" href="classSkShader.html">00019</a> <span class="keyword">class </span><a class="code" href="classSkShader.html">SkShader</a> : <span class="keyword">public</span> <a class="code" href="classSkRefCnt.html">SkRefCnt</a> {
00020 <span class="keyword">public</span>:
00021                         <a class="code" href="classSkShader.html">SkShader</a>();
00022         <span class="keyword">virtual</span> ~<a class="code" href="classSkShader.html">SkShader</a>();
00023 
<a name="l00026"></a><a class="code" href="classSkShader.html#a2">00026</a>         <span class="keyword">const</span> SkMatrix* <a class="code" href="classSkShader.html#a2">getLocalMatrix</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fLocalMatrix; }
00030         <span class="keywordtype">void</span> <a class="code" href="classSkShader.html#a3">setLocalMatrix</a>(<span class="keyword">const</span> SkMatrix&amp;);
00031 
<a name="l00032"></a><a class="code" href="classSkShader.html#w8">00032</a>         <span class="keyword">enum</span> <a class="code" href="classSkShader.html#w8">TileMode</a> {
00033                 <a class="code" href="classSkShader.html#w8w0">kClamp_TileMode</a>,        
00034                 <a class="code" href="classSkShader.html#w8w1">kRepeat_TileMode</a>,       
00035                 <a class="code" href="classSkShader.html#w8w2">kMirror_TileMode</a>,       
00036 
00037                 kTileModeCount
00038         };
00039 
00040         <span class="comment">// override these in your subclass</span>
00041 
<a name="l00042"></a><a class="code" href="classSkShader.html#w9">00042</a>         <span class="keyword">enum</span> <a class="code" href="classSkShader.html#w9">Flags</a> {
00043                 <a class="code" href="classSkShader.html#w9w4">kOpaqueAlpha_Flag</a>       = 0x01, 
00044                 <a class="code" href="classSkShader.html#w9w5">kConstAlpha_Flag</a>        = 0x02, 
00045                 <a class="code" href="classSkShader.html#w9w6">kHasSpan16_Flag</a>         = 0x04, 
00046 
00047                 kFlagsMask                      = <a class="code" href="classSkShader.html#w9w4">kOpaqueAlpha_Flag</a> | <a class="code" href="classSkShader.html#w9w5">kConstAlpha_Flag</a> | <a class="code" href="classSkShader.html#w9w6">kHasSpan16_Flag</a>
00048         };
00049 
00056         <span class="keyword">virtual</span> U32             <a class="code" href="classSkShader.html#a4">getFlags</a>();
00057 
00063         <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classSkShader.html#a5">setContext</a>(     <span class="keyword">const</span> <a class="code" href="classSkBitmap.html">SkBitmap</a>&amp; device,
00064                                                                 <span class="keyword">const</span> <a class="code" href="classSkPaint.html">SkPaint</a>&amp; paint,
00065                                                                 <span class="keyword">const</span> SkMatrix&amp; matrix);
00066 
00071         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a6">shadeSpan</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, SkPMColor[], <span class="keywordtype">int</span> count) = 0;
00074         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a7">shadeSpanOpaque16</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U16[], <span class="keywordtype">int</span> count);
00079         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a8">shadeSpanAlpha</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U8 alpha[], <span class="keywordtype">int</span> count);
00080 
<a name="l00084"></a><a class="code" href="classSkShader.html#a9">00084</a>         <span class="keywordtype">bool</span> <a class="code" href="classSkShader.html#a9">canCallShadeSpanOpaque16</a>()
00085         {
00086                 <span class="keywordflow">return</span> <a class="code" href="classSkShader.html#e0">SkShader::CanCallShadeSpanOpaque16</a>(this-&gt;getFlags());
00087         }
00088 
<a name="l00091"></a><a class="code" href="classSkShader.html#e0">00091</a>         <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="classSkShader.html#e0">CanCallShadeSpanOpaque16</a>(U32 flags)
00092         {
00093                 <span class="keywordflow">return</span> (flags &amp; (<a class="code" href="classSkShader.html#w9w4">kOpaqueAlpha_Flag</a> | <a class="code" href="classSkShader.html#w9w6">kHasSpan16_Flag</a>)) == (<a class="code" href="classSkShader.html#w9w4">kOpaqueAlpha_Flag</a> | <a class="code" href="classSkShader.html#w9w6">kHasSpan16_Flag</a>);
00094         }
00095 
00097         <span class="comment">//      Factory methods for stock shaders</span>
00098 
00108         <span class="keyword">static</span> <a class="code" href="classSkShader.html">SkShader</a>* <a class="code" href="classSkShader.html#e1">CreateBitmapShader</a>(<span class="keyword">const</span> <a class="code" href="classSkBitmap.html">SkBitmap</a>&amp; src,
00109                                                                                 <span class="keywordtype">bool</span> transferOwnershipOfPixels,
00110                                                                                 SkPaint::FilterType ft,
00111                                                                                 TileMode tm);
00112 
00113 <span class="keyword">protected</span>:
00114         <span class="keyword">enum</span> MatrixClass {
00115                 kLinear_MatrixClass,                    <span class="comment">// no perspective</span>
00116                 kFixedStepInX_MatrixClass,              <span class="comment">// fast perspective, need to call fixedStepInX() each scanline</span>
00117                 kPerspective_MatrixClass                <span class="comment">// slow perspective, need to mappoints each pixel</span>
00118         };
00119         <span class="keyword">static</span> MatrixClass ComputeMatrixClass(<span class="keyword">const</span> SkMatrix&amp;);
00120 
00121         <span class="comment">// These can be called by your subclass after setContext() has been called</span>
00122         U8                               getPaintAlpha()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fPaintAlpha; }
00123         <a class="code" href="classSkBitmap.html#w7">SkBitmap::Config</a> getDeviceConfig()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (SkBitmap::Config)fDeviceConfig; }
00124         const SkMatrix&amp;  getTotalInverse()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fTotalInverse; }
00125         MatrixClass              getInverseClass()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (MatrixClass)fTotalInverseClass; }
00126         SkMatrix::MapPtProc     getInverseMapPtProc()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fInverseMapPtProc; }
00127 
00128 <span class="keyword">private</span>:
00129         SkMatrix*       fLocalMatrix;
00130         SkMatrix        fTotalInverse;
00131         SkMatrix::MapPtProc     fInverseMapPtProc;
00132         U8                      fPaintAlpha;
00133         U8                      fDeviceConfig;
00134         U8                      fTotalInverseClass;
00135 
00136         <span class="keyword">static</span> <a class="code" href="classSkShader.html">SkShader</a>* <a class="code" href="classSkShader.html#e1">CreateBitmapShader</a>(<span class="keyword">const</span> <a class="code" href="classSkBitmap.html">SkBitmap</a>&amp; src,
00137                                                                                 <span class="keywordtype">bool</span> transferOwnershipOfPixels,
00138                                                                                 SkPaint::FilterType,
00139                                                                                 TileMode,
00140                                                                                 <span class="keywordtype">void</span>* storage, size_t storageSize);
00141         <span class="keyword">friend</span> <span class="keyword">class </span>SkAutoBitmapShaderInstall;
00142 };
00143 
00145 
00146 <span class="keyword">class </span>SkPairShader : <span class="keyword">public</span> <a class="code" href="classSkShader.html">SkShader</a> {
00147 <span class="keyword">public</span>:
00148         SkPairShader(<a class="code" href="classSkShader.html">SkShader</a>* s0, <a class="code" href="classSkShader.html">SkShader</a>* s1);
00149         <span class="keyword">virtual</span> ~SkPairShader();
00150 
00151         <span class="comment">// overrides</span>
00152         <span class="keyword">virtual</span> U32             <a class="code" href="classSkShader.html#a4">getFlags</a>();
00153         <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classSkShader.html#a5">setContext</a>(     <span class="keyword">const</span> <a class="code" href="classSkBitmap.html">SkBitmap</a>&amp; device,
00154                                                                 <span class="keyword">const</span> <a class="code" href="classSkPaint.html">SkPaint</a>&amp; paint,
00155                                                                 <span class="keyword">const</span> SkMatrix&amp; matrix);
00156 
00157 <span class="keyword">protected</span>:
00158         <a class="code" href="classSkShader.html">SkShader</a>*       getShader0()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fShader0; }
00159         <a class="code" href="classSkShader.html">SkShader</a>*       getShader1()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fShader1; }
00160 
00161 <span class="keyword">private</span>:
00162         <a class="code" href="classSkShader.html">SkShader</a>*       fShader0, *fShader1;
00163 
00164         <span class="keyword">typedef</span> <a class="code" href="classSkShader.html">SkShader</a> INHERITED;
00165 };
00166 
00167 <span class="keyword">class </span>SkComposeShader : <span class="keyword">public</span> SkPairShader {
00168 <span class="keyword">public</span>:
00169         SkComposeShader(<a class="code" href="classSkShader.html">SkShader</a>* outer, <a class="code" href="classSkShader.html">SkShader</a>* inner) : SkPairShader(outer, inner) {}
00170 
00171         <span class="comment">// overrides</span>
00172         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a6">shadeSpan</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, SkPMColor[], <span class="keywordtype">int</span> count);
00173         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a7">shadeSpanOpaque16</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U16[], <span class="keywordtype">int</span> count);
00174         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a8">shadeSpanAlpha</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U8 alpha[], <span class="keywordtype">int</span> count);
00175 
00176 <span class="keyword">private</span>:
00177         <span class="keyword">typedef</span> SkPairShader INHERITED;
00178 };
00179 
00180 <span class="keyword">class </span>SkSumShader : <span class="keyword">public</span> SkPairShader {
00181 <span class="keyword">public</span>:
00182         SkSumShader(<a class="code" href="classSkShader.html">SkShader</a>* s0, <a class="code" href="classSkShader.html">SkShader</a>* s1, U8CPU weight);
00183         SkSumShader(<a class="code" href="classSkShader.html">SkShader</a>* s0, <a class="code" href="classSkShader.html">SkShader</a>* s1, <a class="code" href="classSkXfermode.html">SkXfermode</a>*);
00184         <span class="keyword">virtual</span> ~SkSumShader();
00185 
00186         <span class="comment">// overrides</span>
00187         <span class="keyword">virtual</span> <span class="keywordtype">bool</span>    <a class="code" href="classSkShader.html#a5">setContext</a>(     <span class="keyword">const</span> <a class="code" href="classSkBitmap.html">SkBitmap</a>&amp; device,
00188                                                                 <span class="keyword">const</span> <a class="code" href="classSkPaint.html">SkPaint</a>&amp; paint,
00189                                                                 <span class="keyword">const</span> SkMatrix&amp; matrix);
00190         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a6">shadeSpan</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, SkPMColor[], <span class="keywordtype">int</span> count);
00191         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a7">shadeSpanOpaque16</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U16[], <span class="keywordtype">int</span> count);
00192         <span class="keyword">virtual</span> <span class="keywordtype">void</span>    <a class="code" href="classSkShader.html#a8">shadeSpanAlpha</a>(<span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y, U8 alpha[], <span class="keywordtype">int</span> count);
00193 
00194 <span class="keyword">private</span>:
00195         <a class="code" href="SkColor_8h.html#a18">SkPMColor</a>*      fBuffer;
00196         <a class="code" href="classSkXfermode.html">SkXfermode</a>*     fMode;
00197         U8                      fWeight;
00198 
00199         <span class="keyword">typedef</span> SkPairShader INHERITED;
00200 };
00201 
00202 <span class="preprocessor">#endif</span>
00203 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 9 14:35:23 2006 for SGL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
