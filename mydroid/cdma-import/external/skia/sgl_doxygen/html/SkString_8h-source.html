<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SGL: SkString.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.0 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a></div>
<div class="nav">
<a class="el" href="dir_000000.html">include</a>&nbsp;/&nbsp;<a class="el" href="dir_000001.html">skia</a></div>
<h1>SkString.h</h1><div class="fragment"><pre class="fragment">00001 <span class="preprocessor">#ifndef SkString_DEFINED</span>
00002 <span class="preprocessor"></span><span class="preprocessor">#define SkString_DEFINED</span>
00003 <span class="preprocessor"></span>
00004 <span class="preprocessor">#include "SkScalar.h"</span>
00005 
00006 <span class="comment">/*      Some helper functions for C strings</span>
00007 <span class="comment">*/</span>
00008 
00009 <span class="keywordtype">bool</span> SkStrStartsWith(<span class="keyword">const</span> <span class="keywordtype">char</span> string[], <span class="keyword">const</span> <span class="keywordtype">char</span> prefix[]);
00010 <span class="keywordtype">bool</span> SkStrEndsWith(<span class="keyword">const</span> <span class="keywordtype">char</span> string[], <span class="keyword">const</span> <span class="keywordtype">char</span> suffix[]);
00011 <span class="keywordtype">int</span> SkStrStartsWithOneOf(<span class="keyword">const</span> <span class="keywordtype">char</span> string[], <span class="keyword">const</span> <span class="keywordtype">char</span> prefixes[]);
00012 
<a name="l00019"></a><a class="code" href="classSkString.html">00019</a> <span class="keyword">class </span><a class="code" href="classSkString.html">SkString</a> {
00020 <span class="keyword">public</span>:
00021                                 <a class="code" href="classSkString.html">SkString</a>();
00022         <span class="keyword">explicit</span>        <a class="code" href="classSkString.html">SkString</a>(size_t len);
00023         <span class="keyword">explicit</span>        <a class="code" href="classSkString.html">SkString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]);
00024                                 <a class="code" href="classSkString.html">SkString</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len);
00025         <span class="keyword">explicit</span>        <a class="code" href="classSkString.html">SkString</a>(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp;);
00026                                 ~<a class="code" href="classSkString.html">SkString</a>();
00027 
00028         <span class="keywordtype">bool</span>            isEmpty()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fRec-&gt;fLength == 0; }
00029         size_t          size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (size_t) fRec-&gt;fLength; }
00030         <span class="keyword">const</span> <span class="keywordtype">char</span>*     c_str()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fRec-&gt;data(); }
00031 
00032         <span class="keywordtype">bool</span>    equals(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp;) <span class="keyword">const</span>;
00033         <span class="keywordtype">bool</span>    equals(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]) <span class="keyword">const</span>;
00034         <span class="keywordtype">bool</span>    equals(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len) <span class="keyword">const</span>;
00035 
00036         <span class="keywordtype">bool</span>    startsWith(<span class="keyword">const</span> <span class="keywordtype">char</span> prefix[])<span class="keyword"> const</span>
00037 <span class="keyword">        </span>{
00038                 <span class="keywordflow">return</span> SkStrStartsWith(fRec-&gt;data(), prefix);
00039         }
00040         <span class="keywordtype">bool</span>    endsWith(<span class="keyword">const</span> <span class="keywordtype">char</span> suffix[])<span class="keyword"> const</span>
00041 <span class="keyword">        </span>{
00042                 <span class="keywordflow">return</span> SkStrEndsWith(fRec-&gt;data(), suffix);
00043         }
00044 
00045         <span class="keyword">friend</span> <span class="keywordtype">int</span> operator==(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; b)
00046         {
00047                 <span class="keywordflow">return</span> a.equals(b);
00048         }
00049         <span class="keyword">friend</span> <span class="keywordtype">int</span> operator!=(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; a, <span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; b)
00050         {
00051                 <span class="keywordflow">return</span> !a.equals(b);
00052         }
00053 
00054         <span class="comment">// these methods edit the string</span>
00055 
00056         <a class="code" href="classSkString.html">SkString</a>&amp;       operator=(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp;);
00057 
00058         <span class="keywordtype">char</span>*   writable_str();
00059 
00060         <span class="keywordtype">void</span>    reset();
00061         <span class="keywordtype">void</span>    resize(size_t len) { this-&gt;set(nil, len); }
00062         <span class="keywordtype">void</span>    set(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; src) { *<span class="keyword">this</span> = src; }
00063         <span class="keywordtype">void</span>    set(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]);
00064         <span class="keywordtype">void</span>    set(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len);
00065         <span class="keywordtype">void</span>    setUTF16(<span class="keyword">const</span> U16[]);
00066 
00067         <span class="keywordtype">void</span>    insert(size_t offset, <span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; src) { this-&gt;insert(offset, src.c_str(), src.size()); }
00068         <span class="keywordtype">void</span>    insert(size_t offset, <span class="keyword">const</span> <span class="keywordtype">char</span> text[]);
00069         <span class="keywordtype">void</span>    insert(size_t offset, <span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len);
00070         <span class="keywordtype">void</span>    insertUnichar(size_t offset, SkUnichar);
00071         <span class="keywordtype">void</span>    insertS32(size_t offset, S32 value);
00072         <span class="keywordtype">void</span>    insertHex(size_t offset, U32 value, <span class="keywordtype">int</span> minDigits = 0);
00073         <span class="keywordtype">void</span>    insertScalar(size_t offset, SkScalar);
00074 
00075         <span class="keywordtype">void</span>    append(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; str) { this-&gt;insert((size_t)-1, str); }
00076         <span class="keywordtype">void</span>    append(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]) { this-&gt;insert((size_t)-1, text); }
00077         <span class="keywordtype">void</span>    append(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len) { this-&gt;insert((size_t)-1, text, len); }
00078         <span class="keywordtype">void</span>    appendUnichar(SkUnichar uni) { this-&gt;insertUnichar((size_t)-1, uni); }
00079         <span class="keywordtype">void</span>    appendS32(S32 value) { this-&gt;insertS32((size_t)-1, value); }
00080         <span class="keywordtype">void</span>    appendHex(U32 value, <span class="keywordtype">int</span> minDigits = 0) { this-&gt;insertHex((size_t)-1, value, minDigits); }
00081         <span class="keywordtype">void</span>    appendScalar(SkScalar value) { this-&gt;insertScalar((size_t)-1, value); }
00082 
00083         <span class="keywordtype">void</span>    prepend(<span class="keyword">const</span> <a class="code" href="classSkString.html">SkString</a>&amp; str) { this-&gt;insert(0, str); }
00084         <span class="keywordtype">void</span>    prepend(<span class="keyword">const</span> <span class="keywordtype">char</span> text[]) { this-&gt;insert(0, text); }
00085         <span class="keywordtype">void</span>    prepend(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], size_t len) { this-&gt;insert(0, text, len); }
00086         <span class="keywordtype">void</span>    prependUnichar(SkUnichar uni) { this-&gt;insertUnichar(0, uni); }
00087         <span class="keywordtype">void</span>    prependS32(S32 value) { this-&gt;insertS32(0, value); }
00088         <span class="keywordtype">void</span>    prependHex(U32 value, <span class="keywordtype">int</span> minDigits = 0) { this-&gt;insertHex(0, value, minDigits); }
00089         <span class="keywordtype">void</span>    prependScalar(SkScalar value) { this-&gt;insertScalar((size_t)-1, value); }
00090 
00091         <span class="keywordtype">void</span>    printf(<span class="keyword">const</span> <span class="keywordtype">char</span> format[], ...);
00092 
00093         <span class="keywordtype">void</span>    remove(size_t offset, size_t length);
00094 
00098         <span class="keywordtype">void</span>    <a class="code" href="classSkString.html#a45">swap</a>(<a class="code" href="classSkString.html">SkString</a>&amp; other);
00099 
00101         SkDEBUGCODE(<span class="keyword">static</span> <span class="keywordtype">void</span> UnitTest();)
00104 <span class="keyword">private</span>:
00105 <span class="preprocessor">#ifdef SK_DEBUG</span>
00106 <span class="preprocessor"></span>        <span class="keyword">const</span> <span class="keywordtype">char</span>* fStr;
00107 <span class="preprocessor">#endif</span>
00108 <span class="preprocessor"></span>        <span class="keyword">struct </span>Rec {
00109                 U16     fLength;
00110                 U16     fRefCnt;
00111                 <span class="comment">// data[]</span>
00112                 <span class="keywordtype">char</span>* data() { <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)(<span class="keyword">this</span>) + <span class="keyword">sizeof</span>(Rec); }
00113                 <span class="keyword">const</span> <span class="keywordtype">char</span>* data()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> (<span class="keyword">const</span> <span class="keywordtype">char</span>*)(<span class="keyword">this</span>) + <span class="keyword">sizeof</span>(Rec); }
00114         };
00115         Rec* fRec;
00116 
00117 <span class="preprocessor">#ifdef SK_DEBUG</span>
00118 <span class="preprocessor"></span>        <span class="keywordtype">void</span> validate() <span class="keyword">const</span>;
00119 <span class="preprocessor">#else</span>
00120 <span class="preprocessor"></span>        <span class="keywordtype">void</span> validate()<span class="keyword"> const </span>{}
00121 <span class="preprocessor">#endif</span>
00122 <span class="preprocessor"></span>
00123         <span class="keyword">static</span> Rec*     AllocRec(<span class="keyword">const</span> <span class="keywordtype">char</span> text[], U16CPU len);
00124         <span class="keyword">static</span> Rec*     RefRec(Rec*);
00125 };
00126 
00127 <span class="keyword">class </span>SkAutoUCS2 {
00128 <span class="keyword">public</span>:
00129         SkAutoUCS2(<span class="keyword">const</span> <span class="keywordtype">char</span> utf8[]);
00130         ~SkAutoUCS2();
00131 
00134         <span class="keywordtype">int</span>                     count()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fCount; }
00137         <span class="keyword">const</span> U16*      getUCS2()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> fUCS2; }
00138 
00139 <span class="keyword">private</span>:
00140         <span class="keywordtype">int</span>             fCount;
00141         U16*    fUCS2;
00142 };
00143 
00144 <span class="preprocessor">#endif</span>
00145 <span class="preprocessor"></span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Tue May 9 14:35:23 2006 for SGL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.0 </small></address>
</body>
</html>
